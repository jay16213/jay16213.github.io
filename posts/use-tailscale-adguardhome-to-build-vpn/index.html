<!doctype html><html lang=zh-tw><head><title>[OpenWrt] 使用 Tailscale + AdGuardHome 架設個人 VPN 網域</title>
<meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=X-UA-Compatible content="ie=edge"><link rel=stylesheet href=/application.e5a39b3e9c56cc46ece081445185805d9573207b7f58dddf3163d83b414e37b7.css integrity="sha256-5aObPpxWzEbs4IFEUYWAXZVzIHt/WN3fMWPYO0FON7c="><link rel=icon type=image/png href=/images/author/avatar_hu12482385878873262417.png><meta property="og:url" content="https://jay16213.github.io/posts/use-tailscale-adguardhome-to-build-vpn/"><meta property="og:site_name" content="Jay's Blog"><meta property="og:title" content="[OpenWrt] 使用 Tailscale + AdGuardHome 架設個人 VPN 網域"><meta property="og:description" content="在 OpenWrt 上使用 Tailscale 架設個人私有網域"><meta property="og:locale" content="zh_tw"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-10-04T16:48:04+00:00"><meta property="article:modified_time" content="2024-10-04T16:48:04+00:00"><meta property="article:tag" content="Openwrt"><meta property="article:tag" content="Raspberry-Pi"><meta property="article:tag" content="Vpn"><meta property="article:tag" content="Homelab"><meta name=twitter:card content="summary"><meta name=twitter:title content="[OpenWrt] 使用 Tailscale + AdGuardHome 架設個人 VPN 網域"><meta name=twitter:description content="在 OpenWrt 上使用 Tailscale 架設個人私有網域"><meta name=description content="[OpenWrt] 使用 Tailscale + AdGuardHome 架設個人 VPN 網域"><script>theme=localStorage.getItem("darkmode:color-scheme")||"system",theme=="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?theme="dark":theme="light"),document.documentElement.setAttribute("data-theme",theme)</script></head><body class="type-posts kind-page" data-spy=scroll data-target=#TableOfContents data-offset=80><div class="container-fluid bg-secondary wrapper"><nav class="navbar navbar-expand-xl top-navbar shadow" id=top-navbar><div class=container><button class="navbar-toggler navbar-light" id=sidebar-toggler type=button>
<i data-feather=sidebar></i>
</button>
<a class=navbar-brand href=/><img src=/images/author/avatar_hu12482385878873262417.png id=logo alt=Logo>
Jay's Blog</a>
<button class="navbar-toggler navbar-light" id=navbar-toggler type=button data-toggle=collapse data-target=#top-nav-items aria-label=menu>
<i data-feather=menu></i></button><div class="collapse navbar-collapse dynamic-navbar" id=top-nav-items><ul class="nav navbar-nav ml-auto"><li class=nav-item><a class=nav-link href=/#home>首頁</a></li><li class=nav-item><a class=nav-link href=/#about>關於</a></li><li class=nav-item><a class=nav-link href=/#recent-posts>最近文章</a></li><div id=top-navbar-divider></div><li class=nav-item><a class=nav-link id=blog-link href=/posts>文章</a></li></ul></div></div><img src=/images/author/avatar_hu12482385878873262417.png class=d-none id=main-logo alt=Logo>
<img src=/images/author/avatar_hu12482385878873262417.png class=d-none id=inverted-logo alt="Inverted Logo"></nav><section class=sidebar-section id=sidebar-section><div class=sidebar-holder><div class=sidebar id=sidebar><form class=mx-auto method=get action=/search><input type=text name=keyword placeholder=搜索 data-search id=search-box></form><div class=sidebar-tree><ul class=tree id=tree><li id=list-heading><a href=/posts/ data-filter=all>文章</a></li><div class=subtree><li><a class="active list-link" href=/posts/use-tailscale-adguardhome-to-build-vpn/ title="[OpenWrt] 使用 Tailscale + AdGuardHome 架設個人 VPN 網域">[OpenWrt] 使用 Tailscale + AdGuardHome 架設個人 VPN 網域</a></li><li><a class=list-link href=/posts/openwrt-expand-squashfs/ title="[OpenWrt] 如何擴充 squashfs 的可用空間">[OpenWrt] 如何擴充 squashfs 的可用空間</a></li><li><a class=list-link href=/posts/test-github-actions-locally/ title="如何在 Local 端測試/執行 Github Actions">如何在 Local 端測試/執行 Github Actions</a></li><li><a class=list-link href=/posts/run-docker-command-without-sudo-on-synology-nas/ title="如何在 Synology NAS 使用 non-root user 執行 Docker command">如何在 Synology NAS 使用 non-root user 執行 Docker command</a></li><li><i data-feather=plus-circle></i><a class=list-link href=/posts/leetcode/> LeetCode 隨筆</a><ul><li><a class=list-link href=/posts/leetcode/leetcode-139/ title="Leetcode 隨筆 - 139">Leetcode 隨筆 - 139</a></li><li><a class=list-link href=/posts/leetcode/leetcode-152/ title="Leetcode 隨筆 - 152">Leetcode 隨筆 - 152</a></li><li><a class=list-link href=/posts/leetcode/leetcode-199/ title="Leetcode 隨筆 - 199">Leetcode 隨筆 - 199</a></li><li><a class=list-link href=/posts/leetcode/leetcode-203/ title="LeetCode 隨筆 - 203">LeetCode 隨筆 - 203</a></li><li><a class=list-link href=/posts/leetcode/leetcode-62/ title="Leetcode 隨筆 - 62">Leetcode 隨筆 - 62</a></li><li><a class=list-link href=/posts/leetcode/leetcode-665/ title="Leetcode 隨筆 - 665">Leetcode 隨筆 - 665</a></li><li><a class=list-link href=/posts/leetcode/leetcode-74/ title="LeetCode 隨筆 - 74">LeetCode 隨筆 - 74</a></li></ul></li><li><i data-feather=plus-circle></i><a class=list-link href=/posts/algorithm-note/> 演算法筆記</a><ul><li><a class=list-link href=/posts/algorithm-note/binary-search/ title="Binary Search 中的 lower bound & upper bound">Binary Search 中的 lower bound & upper bound</a></li></ul></li><li><a class=list-link href=/posts/git-stash-pop-conflict-solution/ title="Git Stash Pop Conflict 解決方式">Git Stash Pop Conflict 解決方式</a></li><li><a class=list-link href=/posts/opencv-on-raspberry/ title="OpenCV on Raspberry Pi 3">OpenCV on Raspberry Pi 3</a></li><li><a class=list-link href=/posts/raspberry-serial-port-login/ title="Raspberry Pi 透過 Serial Port 連線 - 踩雷筆記">Raspberry Pi 透過 Serial Port 連線 - 踩雷筆記</a></li><li><a class=list-link href=/posts/yolo-on-raspberry/ title="Yolo on Raspberry Pi 3">Yolo on Raspberry Pi 3</a></li></div></ul></div></div></div></section><section class=content-section id=content-section><div class=content><div class="container p-0 read-area"><div class="hero-area col-sm-12" id=hero-area style=background-image:url(/images/default-hero.jpg)></div><div class=page-content><div class="author-profile ml-auto align-self-lg-center"><img class=rounded-circle src=/images/author/avatar_hu1063887430385448869.png alt="Author Image"><h5 class=author-name>Jay Lin</h5><p class=text-muted>Friday, October 4, 2024 | 4</p></div><div class=title><h1>[OpenWrt] 使用 Tailscale + AdGuardHome 架設個人 VPN 網域</h1></div><div class=tags><ul style=padding-left:0><li class=rounded><a href=/tags/openwrt/ class="btn btn-sm btn-info">openwrt</a></li><li class=rounded><a href=/tags/raspberry-pi/ class="btn btn-sm btn-info">raspberry-pi</a></li><li class=rounded><a href=/tags/vpn/ class="btn btn-sm btn-info">vpn</a></li><li class=rounded><a href=/tags/homelab/ class="btn btn-sm btn-info">homelab</a></li></ul></div><div class=post-content id=post-content><h2 id=tailscale-簡介>Tailscale 簡介</h2><p>Tailscale 是一款基於 WireGuard 技術的點對點虛擬私人網路 (VPN) 解決方案。與傳統的 VPN 不同，Tailscale 的設計目的是簡化網路配置和安全性管理，無需繁瑣的防火牆設置或是專業的網路知識。它透過 Tailscale 提供的控制伺服器自動處理網路節點之間的連線協商，無需使用者具備 Public IP。Tailscale 支援多種作業系統和設備，包括 Linux、Windows、macOS、iOS、Android 等，並且可以輕鬆應對現代網路環境中的 NAT 穿透問題。</p><p>有關 Tailscale 運作原理的介紹，可以參考<a href=https://tailscale.com/blog/how-tailscale-works target=_blank rel=noopener>官方的說明</a></p><h3 id=為何選擇-tailscale>為何選擇 Tailscale</h3><p>由於我目前的網路環境，我的 openwrt 拿到的 WAN IP 是第四台的 private IP，然後再透過他們的 NAT 出去，無法直接拿到一個 public IP 連接到 Internet，因此如果使用 DDNS + Wireguard 的解決方案的話還需要請第四台廠商幫我開 port forwarding。因為我不希望更改租屋處的網路設定，因此選擇了 Tailscale 作為解決方案。Tailscale 的好處在於它可以透過其伺服器自動協商並建立 VPN 網域，不需要準備一個 Public IP。</p><h2 id=在-openwrt-上安裝-tailscale>在 OpenWrt 上安裝 Tailscale</h2><p>在 OpenWrt 的官方 wiki 上有一篇<a href=https://openwrt.org/docs/guide-user/services/vpn/tailscale/start target=_blank rel=noopener>教學文章</a>，是使用 opkg 上面已經打包好的 package 安裝 Tailscale, 但我抓下來發現 opkg 上提供的 tailscale 版本為 1.32，而我安裝的當下 tailscale 已經出到 1.74 版了，且官方有警告 1.32 版本存在安全性問題，因此我後來決定不透過 opkg 安裝 Tailscale</p><blockquote><p>如果你也跟我一樣先前已經透過 opkg 安裝舊版本的 tailscale 了，則可以透過 <code>opkg remove tailscale</code> 先將舊版 tailscale 移除
移除後系統仍會殘留兩個 binary: <code>/usr/bin/tailscale</code> 以及 <code>/usr/sbin/tailscaled</code>，必須要將這兩個 binary 刪除或是稍候直接用從官網下載的 binary 覆蓋過去，這樣系統才不會殘留不同版本的 tailscale</p></blockquote><h3 id=1-install-tailscale-from-static-binary>1. Install Tailscale from static binary</h3><p>其實官方有提供一鍵安裝的 script，但似乎只支援他有列出的 Linux distro, 我在 OpenWrt 上 script 無法判別我的 OS, 因此我選擇直接下載官方打包的 static binary 自行安裝.</p><p>從 <a href=https://pkgs.tailscale.com/stable/#static target=_blank rel=noopener>這裡</a> 可以下載到官方最新的 release，根據你的裝置的 CPU 架構選擇對應的 binary 即可，由於我的裝置是 Raspberry Pi 4, 因此要下載 <code>arm64</code> 版本；如果懶得自己下載也可以用 <a href=https://github.com/adyanth/openwrt-tailscale-enabler target=_blank rel=noopener>adyanth/openwrt-tailscale-enabler</a>, 已經有人幫忙打包好需要的東西了，照著 readme 做就可以了</p><p>從官方載點下載下來解壓縮後可以看到以下的檔案結構：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-plaintext data-lang=plaintext><span style=display:flex><span>tailscale_1.74.1_arm64
</span></span><span style=display:flex><span>├── systemd
</span></span><span style=display:flex><span>|   ├── tailscaled.defaults
</span></span><span style=display:flex><span>|   └── tailscaled.service
</span></span><span style=display:flex><span>├── tailscale
</span></span><span style=display:flex><span>└── tailscaled
</span></span></code></pre></div><p>可以看到最核心的兩個執行檔 <code>tailscale</code> & <code>tailscaled</code>, 將 <code>tailscale</code> 放至 <code>/usr/bin</code>, <code>tailscaled</code> 放至 <code>/usr/sbin</code> 即可。
至於 <code>systemd</code> 資料夾裡面的 script, 因為 OpenWrt 本身並不支援 <code>systemd</code>，所以不可用</p><p>接下來，啟動 tailscale daemon</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>/etc/init.d/tailscale start
</span></span></code></pre></div><p>順便設定 init.d 讓 tailscale 在開機時自動啟動服務</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>/etc/init.d/tailscale enable
</span></span></code></pre></div><h3 id=2-firewall-setting-on-openwrt>2. Firewall setting on OpenWrt</h3><p>將 OpenWrt 連上 Tailscale 之前，可以先將防火牆設定好，一樣參考 OpenWrt 的官方文件即可</p><h4 id=a-創建-tailscale-介面>a. 創建 tailscale 介面</h4><p>登入 LuCI -> Network -> Interfaces → Add new interface，創建一個 <code>tailscale</code> 的 interface, 協定 (Protocol) 選擇 <code>Unmanaged</code>, 裝置 (Device) 選擇 <code>tailscale0</code></p><p><img alt=create-interface src=/posts/use-tailscale-adguardhome-to-build-vpn/create-interface.png></p><p>並且在 interface 的 firewall 設定中，創建並選擇 <code>tailscale</code> 這個 firewall zone
<img alt=firewall-setting src=/posts/use-tailscale-adguardhome-to-build-vpn/firewall-setting.png></p><h4 id=b-修改-initd-script>b. 修改 init.d script</h4><p>根據 OpenWrt 的官方教學說明，為了讓 Tailscale 正常運行，並為 <code>tailscale0</code> 介面分配 IP，需要修改 init.d 腳本。</p><p>在腳本中加入以下這一行</p><pre tabindex=0><code>procd_append_param command --tun tailscale0
</code></pre><p>這是因為若未添加此行，防火牆配置將無法生效，導致其他裝置無法成功訪問 OpenWrt 的 LAN。</p><p>修改後的 init.d 腳本如下</p><pre tabindex=0><code>#!/bin/sh /etc/rc.common

# Copyright 2020 Google LLC.
# Copyright (C) 2021 CZ.NIC z.s.p.o. (https://www.nic.cz/)
# SPDX-License-Identifier: Apache-2.0

USE_PROCD=1
START=80

start_service() {
  local state_file
  local port
  local std_err std_out

  config_load tailscale
  config_get_bool std_out &#34;settings&#34; log_stdout 1
  config_get_bool std_err &#34;settings&#34; log_stderr 1
  config_get port &#34;settings&#34; port 41641
  config_get state_file &#34;settings&#34; state_file /etc/tailscale/tailscaled.state

  /usr/sbin/tailscaled --cleanup

  procd_open_instance
  procd_set_param command /usr/sbin/tailscaled

  # Set the port to listen on for incoming VPN packets.
  # Remote nodes will automatically be informed about the new port number,
  # but you might want to configure this in order to set external firewall
  # settings.
  procd_append_param command --port &#34;$port&#34;
  procd_append_param command --state &#34;$state_file&#34;

  # work around from https://openwrt.org/docs/guide-user/services/vpn/tailscale/start
  procd_append_param command --tun tailscale0

  procd_set_param respawn
  procd_set_param stdout &#34;$std_out&#34;
  procd_set_param stderr &#34;$std_err&#34;

  procd_close_instance
}

stop_service() {
  /usr/sbin/tailscaled --cleanup
}
</code></pre><br><p>改完記得將 daemon 重啟</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>/etc/init.d/tailscale restart
</span></span></code></pre></div><h4 id=c-firewall-設定>c. Firewall 設定</h4><p>首先按照 Tailscale 的 <a href=https://tailscale.com/kb/1019/subnets target=_blank rel=noopener>Set up a subnet router</a> Enable ip forwarding</p><p>接著在 LuCI -> Network -> Firewall -> Zones -> Add, 按照以下設定防火牆</p><p>Name: <strong>tailscale</strong><br>Input: <strong>ACCEPT</strong><br>Output: <strong>ACCEPT</strong><br>Forward: <strong>ACCEPT</strong><br>Masquerading: <strong>on</strong><br>MSS Clamping: <strong>on</strong><br>Covered networks: <strong>tailscale</strong><br>Allow forward to destination zones: <strong>LAN</strong> + <strong>WAN</strong> (若有需要將 OpenWrt 設為 Exit node 才需要加入 WAN)<br>Allow forward from source zones: <strong>LAN</strong></p><div class="alert info"><span><i data-feather=info></i></span>
<span><strong>由於新建了一個 firewall zone, 因此如果原本有設定 port forwarding 的話，也要為 tailscale zone 加入對應的 port forwarding 規則，讓連上 tailscale network 的裝置可以透過原本的 LAN IP 存取內網服務</strong></span></div><h3 id=3-connect-to-tailscale>3. Connect to Tailscale</h3><p>上述設定都完成後，就可以使用以下指令連上 Tailscale 了</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>tailscale up --netfilter-mode<span style=color:#f92672>=</span>off --accept-dns<span style=color:#f92672>=</span>false --advertise-routes<span style=color:#f92672>=</span>10.10.0.0/24 --accept-routes --advertise-exit-node
</span></span></code></pre></div><p>參數說明：</p><ul><li><code>--netfilter-mode=off</code>: 自己管理 firewall</li><li><code>--accept-dns=false</code>: 由於我的 OpenWrt 有使用 AdGuardHome 作為我的 DNS server，因此使用此參數避免 Tailscale 更改我的 OpenWrt 的 DNS 設定</li><li><code>--advertise-routes</code>: 啟用 Tailscale 的 Subnet routes 功能，這樣連上我的 Tailscale network 的裝置都可以存取位於 OpenWrt 內的 LAN 裝置，可以透過這種方式來把我的 self-hosted 服務提供到 VPN 上</li><li><code>--accept-routes</code>: 如果有其他裝置 expose 了他自己的 Subnet routes, 開啟此選項可以讓此裝置連上其他裝置的 Subnet routes</li><li><code>--advertise-exit-node</code>: 將我的 OpenWrt 作為一個網路出口節點，這樣如果人不在台灣就可以有一個跳板可以跳回台灣上網</li></ul><p>完整的 <code>tailscale up</code> 參數說明可以參考 <a href=https://tailscale.com/kb/1241/tailscale-up target=_blank rel=noopener>官方說明</a></p><h3 id=4-tailscale-admin-console-設定>4. Tailscale admin console 設定</h3><p>Raspberry Pi 成功連上 Tailscale 後，還需至 Tailscale 的 admin console 設定 Subnet routes & DNS</p><h4 id=a-啟用-subnet-routes--exit-node>a. 啟用 Subnet routes & Exit Node</h4><p>首先按照官方的 <a href=https://tailscale.com/kb/1019/subnets#enable-subnet-routes-from-the-admin-console target=_blank rel=noopener>enable-subnet-routes-from-the-admin-console</a> 和 <a href=https://tailscale.com/kb/1103/exit-nodes target=_blank rel=noopener>allow-the-exit-node-from-the-admin-console</a> 啟用 Subnet routes 以及 Exit node 功能</p><p><img alt=tailscale-machines src=/posts/use-tailscale-adguardhome-to-build-vpn/tailscale-machines.png><br><br><br></p><h4 id=b-dns-configuration-in-tailscale>b. DNS Configuration in Tailscale</h4><p>去 Tailscale 的 Admin console 的 DNS 頁面，將自架的 DNS server 的 IP address 加入 Nameservers 設定，並打開 <strong>Override local DNS</strong> 選項，這樣就會強制讓連上 Tailscale network 的裝置都使用我自架的 DNS server</p><p><img alt=dns-config src=/posts/use-tailscale-adguardhome-to-build-vpn/dns-config.png></p><div class="alert info"><span><i data-feather=info></i></span>
<span><strong>如果沒將 Override local DNS 選項打開，Tailscale 預設是會使用該裝置自己的 DNS 設定，這樣就沒辦法使用到 AdGuardHome 的 DNS 去擋廣告了</strong></span></div><p>這邊可以注意到由於前面已經有把 LAN 的網段透過 Subnet routes expose 給 Tailscale network 了，所以這邊可以直接將 DNS 的 server IP 直接設為 LAN IP，且 AdGuardHome 也不需要額外去 Listen <code>tailscale0</code> interface 即可正常提供 DNS 服務。</p><h2 id=reference>Reference</h2><ul><li><a href=https://tailscale.com/ target=_blank rel=noopener>https://tailscale.com/</a></li><li><a href=https://openwrt.org/docs/guide-user/services/vpn/tailscale/start target=_blank rel=noopener>https://openwrt.org/docs/guide-user/services/vpn/tailscale/start</a></li><li><a href=https://github.com/adyanth/openwrt-tailscale-enabler target=_blank rel=noopener>https://github.com/adyanth/openwrt-tailscale-enabler</a></li><li><a href=https://akashrajpurohit.com/blog/adguard-home-tailscale-erase-ads-on-the-go/ target=_blank rel=noopener>AdGuard Home + Tailscale = Erase Ads on the Go</a></li></ul></div><div class="row pl-3 pr-3"><div class="col-md-6 share-buttons"><strong>分享:</strong>
<a class="btn icon-button bg-facebook" href="https://www.facebook.com/sharer.php?u=https%3a%2f%2fjay16213.github.io%2fposts%2fuse-tailscale-adguardhome-to-build-vpn%2f" target=_blank><i class="fab fa-facebook"></i>
</a><a class="btn icon-button bg-twitter" href="https://twitter.com/share?url=https%3a%2f%2fjay16213.github.io%2fposts%2fuse-tailscale-adguardhome-to-build-vpn%2f&text=%5bOpenWrt%5d%20%e4%bd%bf%e7%94%a8%20Tailscale%20%2b%20AdGuardHome%20%e6%9e%b6%e8%a8%ad%e5%80%8b%e4%ba%ba%20VPN%20%e7%b6%b2%e5%9f%9f&via=Jay%27s%20Blog" target=_blank><i class="fab fa-twitter"></i>
</a><a class="btn icon-button bg-reddit" href="https://reddit.com/submit?url=https%3a%2f%2fjay16213.github.io%2fposts%2fuse-tailscale-adguardhome-to-build-vpn%2f&title=%5bOpenWrt%5d%20%e4%bd%bf%e7%94%a8%20Tailscale%20%2b%20AdGuardHome%20%e6%9e%b6%e8%a8%ad%e5%80%8b%e4%ba%ba%20VPN%20%e7%b6%b2%e5%9f%9f" target=_blank><i class="fab fa-reddit"></i>
</a><a class="btn icon-button bg-linkedin" href="https://www.linkedin.com/shareArticle?url=https%3a%2f%2fjay16213.github.io%2fposts%2fuse-tailscale-adguardhome-to-build-vpn%2f&title=%5bOpenWrt%5d%20%e4%bd%bf%e7%94%a8%20Tailscale%20%2b%20AdGuardHome%20%e6%9e%b6%e8%a8%ad%e5%80%8b%e4%ba%ba%20VPN%20%e7%b6%b2%e5%9f%9f" target=_blank><i class="fab fa-linkedin"></i>
</a><a class="btn icon-button" href="mailto:?subject=%5bOpenWrt%5d%20%e4%bd%bf%e7%94%a8%20Tailscale%20%2b%20AdGuardHome%20%e6%9e%b6%e8%a8%ad%e5%80%8b%e4%ba%ba%20VPN%20%e7%b6%b2%e5%9f%9f&body=https%3a%2f%2fjay16213.github.io%2fposts%2fuse-tailscale-adguardhome-to-build-vpn%2f" target=_blank><i class="fas fa-envelope-open-text"></i></a></div></div><hr><div class="row next-prev-navigator"><div class="col-md-12 next-article"><a href=/posts/openwrt-expand-squashfs/ title="[OpenWrt] 如何擴充 squashfs 的可用空間" class="btn filled-button"><div>下一篇 <i class="fas fa-chevron-circle-right"></i></div><div class=next-prev-text>[OpenWrt] 如何擴充 squashfs 的可用空間</div></a></div></div><hr><div id=disqus_thread></div><script type=text/javascript>(function(){if(window.location.hostname=="localhost")return;var t,e=document.createElement("script");e.type="text/javascript",e.async=!0,t="jay-blog-1",e.src="//"+t+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)})()</script><noscript>請開啟 JavaScript 查看
<a href=https://disqus.com/?ref_noscript>評論由 Disqus.</a></noscript><a href=https://disqus.com/ class=dsq-brlink>評論由 <span class=logo-disqus>Disqus</span></a></div></div></div><a id=scroll-to-top class=btn data-toggle=tooltip data-placement=left title="Scroll to top"><i class="fas fa-chevron-circle-up"></i></a></section><section class=toc-section id=toc-section><div class=toc-holder><h5 class="text-center pl-3">目錄</h5><hr><div class=toc><nav id=TableOfContents><ul><li><a href=#tailscale-簡介>Tailscale 簡介</a><ul><li><a href=#為何選擇-tailscale>為何選擇 Tailscale</a></li></ul></li><li><a href=#在-openwrt-上安裝-tailscale>在 OpenWrt 上安裝 Tailscale</a><ul><li><a href=#1-install-tailscale-from-static-binary>1. Install Tailscale from static binary</a></li><li><a href=#2-firewall-setting-on-openwrt>2. Firewall setting on OpenWrt</a><ul><li><a href=#a-創建-tailscale-介面>a. 創建 tailscale 介面</a></li><li><a href=#b-修改-initd-script>b. 修改 init.d script</a></li><li><a href=#c-firewall-設定>c. Firewall 設定</a></li></ul></li><li><a href=#3-connect-to-tailscale>3. Connect to Tailscale</a></li><li><a href=#4-tailscale-admin-console-設定>4. Tailscale admin console 設定</a><ul><li><a href=#a-啟用-subnet-routes--exit-node>a. 啟用 Subnet routes & Exit Node</a></li><li><a href=#b-dns-configuration-in-tailscale>b. DNS Configuration in Tailscale</a></li></ul></li></ul></li><li><a href=#reference>Reference</a></li></ul></nav></div></div></section></div><footer id=footer class="container-fluid text-center align-content-center footer pb-2"><div class="container pt-5"><div class="row text-left"><div class="col-md-4 col-sm-12"><h5>導覽列</h5><ul><li class=nav-item><a class=smooth-scroll href=https://jay16213.github.io/#about>關於</a></li><li class=nav-item><a class=smooth-scroll href=https://jay16213.github.io/#recent-posts>最近文章</a></li></ul></div><div class="col-md-4 col-sm-12"><h5>聯絡方式:</h5><ul><li><a href=mailto:jay101630@gmail.com target=_blank rel=noopener><span><i class="fas fa-envelope"></i></span> <span>jay101630@gmail.com</span></a></li></ul></div></div></div><hr><div class=container><div class="row text-left"><div class=col-md-4><a id=theme href=https://github.com/hugo-toha/toha target=_blank rel=noopener><img src=/images/theme-logo_hu16779671404603505019.png alt="Toha Theme Logo">
Toha</a></div><div class="col-md-4 text-center">Copyright © 2022 Jay&rsquo;s Blog. All right reserved.</div><div class="col-md-4 text-right"><a id=hugo href=https://gohugo.io/ target=_blank rel=noopener>Powered by
<img src=/images/hugo-logo.svg alt="Hugo Logo" height=18></a></div></div></div></footer><script src=/application.3a83796c45aa80d78f03a42b695ed8e2d598e685387f0c93392552efe1d98f50.js integrity="sha256-OoN5bEWqgNePA6QraV7Y4tWY5oU4fwyTOSVS7+HZj1A=" defer></script></body></html>