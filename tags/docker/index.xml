<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Docker on Jay's Blog</title><link>https://jay16213.github.io/tags/docker/</link><description>Recent content in Docker on Jay's Blog</description><generator>Hugo -- gohugo.io</generator><language>zh-tw</language><lastBuildDate>Wed, 21 Jun 2023 21:59:18 +0800</lastBuildDate><atom:link href="https://jay16213.github.io/tags/docker/index.xml" rel="self" type="application/rss+xml"/><item><title>如何在 Synology NAS 使用 non-root user 執行 Docker command</title><link>https://jay16213.github.io/posts/run-docker-command-without-sudo-on-synology-nas/</link><pubDate>Wed, 21 Jun 2023 21:59:18 +0800</pubDate><guid>https://jay16213.github.io/posts/run-docker-command-without-sudo-on-synology-nas/</guid><description>&lt;p>最近因為需要在 Synology NAS 上部署 &lt;a href="https://coder.com/" target="_blank" rel="noopener">Coder&lt;/a>，container 需要 docker 的運行權限，因為 DSM 的 docker 比較特別，故這裡紀錄一下要如何讓非 root user 也能使用 docker&lt;/p>
&lt;h3 id="步驟">步驟&lt;/h3>
&lt;p>首先 ssh 進 NAS 後，使用以下指令來新增 &amp;ldquo;docker&amp;rdquo; 這個 group, 並把需要 docker 權限的 user 加入 docker group&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>sudo synogroup --add docker
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo synogroup --member docker $USER &lt;span style="color:#75715e"># 將自己加入 docker group&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;br>
&lt;p>成功新增後，登入 DSM，可以看到在使用者群組的地方多了一個 &lt;code>docker&lt;/code>, 可以加上補充說明這個 group 的作用 (所以理論上應該直接在 DSM 新增 group 就好了，但是我沒試過)
&lt;img alt="dsm" src="https://jay16213.github.io/posts/run-docker-command-without-sudo-on-synology-nas/dsm.jpg">&lt;/p>
&lt;p>接著將 docker.sock 的 group ownership 從 root 改成 docker&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>sudo chown root:docker /var/run/docker.sock
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>改完後重新登入，應該就可以不用加 sudo 就可以執行 docker command 了！&lt;/p></description></item></channel></rss>